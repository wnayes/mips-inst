!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.MIPSInst=r():t.MIPSInst=r()}("undefined"!=typeof self?self:this,function(){return function(t){var r={};function e(a){if(r[a])return r[a].exports;var o=r[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=r,e.d=function(t,r,a){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:a})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(e.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)e.d(a,o,function(r){return t[r]}.bind(null,o));return a},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=0)}([function(t,r,e){"use strict";e.r(r);const a={r0:0,zero:0,at:1,v0:2,v1:3,a0:4,a1:5,a2:6,a3:7,t0:8,t1:9,t2:10,t3:11,t4:12,t5:13,t6:14,t7:15,s0:16,s1:17,s2:18,s3:19,s4:20,s5:21,s6:22,s7:23,t8:24,t9:25,k0:26,k1:27,gp:28,sp:29,fp:30,ra:31};function o(t){if(t)return a[t.toLowerCase()]}const s={S:16,D:17,W:20,L:21};function n(t){return s[t.toUpperCase()]}function i(t){for(let r in s)if(s[r]===t)return r;return""}const f={S:0,D:1,W:4,L:5};function l(t){return f[t.toUpperCase()]}function d(t){for(let r in f)if(f[r]===t)return r;return""}function m(t){return s.hasOwnProperty(t.toUpperCase())||f.hasOwnProperty(t.toUpperCase())}const p={F:0,UN:1,EQ:2,UEQ:3,OLT:4,ULT:5,OLE:6,ULE:7,SF:8,NGLE:9,SEQ:10,NGL:11,LT:12,NGE:13,LE:14,NGT:15};function c(t){return p[t.toUpperCase()]}function u(t){for(let r in p)if(p[r]===t)return r;return""}function y(t){return p.hasOwnProperty(t.toUpperCase())}function w(t){return"0"===t[0]||"1"===t[0]}function h(t,r,e){return(t>>>e&b(r.length))===g(r)}function g(t){let r=0;for(var e=0;e<t.length;e++){r<<=1,r|="1"===t[e]?1:0}return r}function b(t){if(t<=0)throw new Error(`makeBitMask cannot make mask of length ${t}`);let r=1;for(;--t;)r<<=1,r|=1;return r}function v(t,r){for(;t.length<r;)t="0"+t;return t}function S(t,r,e,a){let o,[s,n,i]=t;return o="b"===(n=n.toLowerCase())?parseInt(i,2):"o"===n?parseInt(i,8):"x"===n?parseInt(i,16):parseInt(i,10),a&&(o>>>=a),16===r&&e&&(o=x(o)),s&&(o=-o),o}function x(t){return new Int16Array([t])[0]}function D(t){if("?"===t[t.length-1]&&(t=t.substring(0,t.length-1)),-1===t.indexOf("int"))return"cc"===t.substr(0,2)?{signed:!1,bits:4,shift:!1}:null;let r=0;const e=t.indexOf("shift");return e>0&&(r=t.substr(e).match(/\d+/g)),{signed:"u"!==t[0],bits:parseInt(t.match(/\d+/g)),shift:r}}const E="rs",O="rt",$="rd",z="fs",U="ft",j="fd",C="fr",L="uint5",A="uint5",I="int16",P="uint16",k="cc",W="fmt",N="fmt3";function B(t){return T[t.toLowerCase()]}function F(t){if(w(t))return t.length;switch(t=t.replace("?","")){case"cc":case"fmt3":return 3;case"cond":return 4;case"rs":case"rt":case"rd":case"fs":case"ft":case"fd":case"fr":case"sa":case"fmt":return 5}const r=D(t);if(r)return r.bits;throw new Error(`Unrecongized format value: ${t}`)}function M(t,r,e){let a,o=0,s=0;for(let n=r.length-1;n>=0;n--){let i,f=r[n];if(Array.isArray(f)){let r=!1;for(let n=0;n<f.length;n++)if((a=q(f[n],t,s,e))>=0){r=!0,o+=a,i=F(f[n]);break}if(!r)return 0}else{if(!((a=q(f,t,s,e))>=0))return 0;o+=a,i=F(f)}s+=i}return o}function q(t,r,e,a){if(!w(t)){if(t===W){for(let t=0;t<a.length;t++){let o=v(n(a[t]).toString(2),5);if(h(r,o,e))return o.length}return-1}if(t===N){for(let t=0;t<a.length;t++){let o=v(l(a[t]).toString(2),3);if(h(r,o,e))return o.length}return-1}return 0}return h(r,t,e)?t.length:-1}const T={"abs.fmt":{format:["010001",W,"00000",z,j,"000101"],fmts:["S","D"],display:[j,z]},add:{format:["000000",E,O,$,"00000100000"],display:[$,E,O]},"add.fmt":{format:["010001",W,U,z,j,"000000"],fmts:["S","D"],display:[j,z,U]},addi:{format:["001000",E,O,I],display:[O,E,I]},addiu:{format:["001001",E,O,P],display:[O,E,P]},addu:{format:["000000",E,O,$,"00000100001"],display:[$,E,O]},and:{format:["000000",E,O,$,"00000100100"],display:[$,E,O]},andi:{format:["001100",E,O,P],display:[O,E,P]},bc1f:{format:["010001","01000",[k,"000"],"00",I],display:["cc?",I]},bc1fl:{format:["010001","01000",[k,"000"],"10",I],display:["cc?",I]},bc1t:{format:["010001","01000",[k,"000"],"01",I],display:["cc?",I]},bc1tl:{format:["010001","01000",[k,"000"],"11",I],display:["cc?",I]},beq:{format:["000100",E,O,P],display:[E,O,P]},beql:{format:["010100",E,O,P],display:[E,O,P]},bgez:{format:["000001",E,"00001",P],display:[E,P]},bgezal:{format:["000001",E,"10001",P],display:[E,P]},bgezall:{format:["000001",E,"10011",P],display:[E,P]},bgezl:{format:["000001",E,"00011",P],display:[E,P]},bgtz:{format:["000111",E,"00000",P],display:[E,P]},bgtzl:{format:["010111",E,"00000",P],display:[E,P]},blez:{format:["000110",E,"00000",P],display:[E,P]},blezl:{format:["010110",E,"00000",P],display:[E,P]},bltz:{format:["000001",E,"00000",P],display:[E,P]},bltzal:{format:["000001",E,"10000",P],display:[E,P]},bltzall:{format:["000001",E,"10010",P],display:[E,P]},bltzl:{format:["000001",E,"00010",P],display:[E,P]},bne:{format:["000101",E,O,P],display:[E,O,P]},bnel:{format:["010101",E,O,P],display:[E,O,P]},break:{format:["000000",["uint20","00000000000000000000"],"001101"],display:[]},"c.cond.fmt":{format:["010001",W,U,z,[k,"000"],"00","11","cond"],fmts:["S","D"],display:["cc?",z,U]},"ceil.l.fmt":{format:["010001",W,"00000",z,j,"001010"],fmts:["S","D"],display:[j,z]},"ceil.w.fmt":{format:["010001",W,"00000",z,j,"001110"],fmts:["S","D"],display:[j,z]},cfc1:{format:["010001","00010",O,z,"00000000000"],display:[O,z]},ctc1:{format:["010001","00110",O,z,"00000000000"],display:[O,z]},cop0:{format:["010000","uint26"],display:["uint26"]},cop1:{format:["010001","uint26"],display:["uint26"]},cop2:{format:["010010","uint26"],display:["uint26"]},cop3:{format:["010011","uint26"],display:["uint26"]},"cvt.d.fmt":{format:["010001",W,"00000",z,j,"100001"],fmts:["S","W","L"],display:[j,z]},"cvt.l.fmt":{format:["010001",W,"00000",z,j,"100101"],fmts:["S","D"],display:[j,z]},"cvt.s.fmt":{format:["010001",W,"00000",z,j,"100000"],fmts:["D","W","L"],display:[j,z]},"cvt.w.fmt":{format:["010001",W,"00000",z,j,"100100"],fmts:["S","D"],display:[j,z]},dadd:{format:["000000",E,O,$,"00000101100"],display:[$,E,O]},daddi:{format:["011000",E,O,I],display:[O,E,I]},daddiu:{format:["011001",E,O,P],display:[O,E,P]},daddu:{format:["000000",E,O,$,"00000101101"],display:[$,E,O]},ddiv:{format:["000000",E,O,"0000000000011110"],display:[E,O]},ddivu:{format:["000000",E,O,"0000000000011111"],display:[E,O]},div:{format:["000000",E,O,"0000000000011010"],display:[E,O]},"div.fmt":{format:["010001",W,U,z,j,"000011"],fmts:["S","D"],display:[j,z,U]},divu:{format:["000000",E,O,"0000000000011011"],display:[E,O]},dmfc1:{format:["010001","00001",O,z,"00000000000"],display:[O,z]},dmult:{format:["000000",E,O,"0000000000011100"],display:[E,O]},dmultu:{format:["000000",E,O,"0000000000011101"],display:[E,O]},dmtc1:{format:["010001","00101",O,z,"00000000000"],display:[O,z]},dsll:{format:["00000000000",O,$,L,"111000"],display:[$,O,L]},dsll32:{format:["00000000000",O,$,L,"111100"],display:[$,O,L]},dsllv:{format:["000000",E,O,$,"00000010100"],display:[$,O,E]},dsra:{format:["00000000000",O,$,L,"111011"],display:[$,O,L]},dsra32:{format:["00000000000",O,$,L,"111111"],display:[$,O,L]},dsrav:{format:["000000",E,O,$,"00000010111"],display:[$,O,E]},dsrl:{format:["00000000000",O,$,L,"111010"],display:[$,O,L]},dsrl32:{format:["00000000000",O,$,L,"111110"],display:[$,O,L]},dsrlv:{format:["000000",E,O,$,"00000010110"],display:[$,O,E]},dsub:{format:["000000",E,O,$,"00000101110"],display:[$,E,O]},dsubu:{format:["000000",E,O,$,"00000101111"],display:[$,E,O]},"floor.l.fmt":{format:["010001",W,"00000",z,j,"001011"],fmts:["S","D"],display:[j,z]},"floor.w.fmt":{format:["010001",W,"00000",z,j,"001111"],fmts:["S","D"],display:[j,z]},j:{format:["000010","uint26shift2"],display:["uint26shift2"]},jal:{format:["000011","uint26shift2"],display:["uint26shift2"]},jalr:{format:["000000",E,"00000",[$,"11111"],"00000","001001"],display:["rd?",E]},jr:{format:["000000",E,"000000000000000","001000"],display:[E]},lb:{format:["100000",E,O,I],display:[O,I,"(",E,")"]},lbu:{format:["100100",E,O,P],display:[O,P,"(",E,")"]},ld:{format:["110111",E,O,I],display:[O,I,"(",E,")"]},ldc1:{format:["110101",E,U,I],display:[U,I,"(",E,")"]},ldc2:{format:["110110",E,O,I],display:[O,I,"(",E,")"]},ldl:{format:["011010",E,O,I],display:[O,I,"(",E,")"]},ldr:{format:["011011",E,O,I],display:[O,I,"(",E,")"]},ldxc1:{format:["010011",E,O,"00000",j,"000001"],display:[j,O,"(",E,")"]},lh:{format:["100001",E,O,I],display:[O,I,"(",E,")"]},lhu:{format:["100101",E,O,I],display:[O,I,"(",E,")"]},ll:{format:["110000",E,O,I],display:[O,I,"(",E,")"]},lld:{format:["110100",E,O,I],display:[O,I,"(",E,")"]},lui:{format:["001111","00000",O,P],display:[O,P]},lw:{format:["100011",E,O,I],display:[O,I,"(",E,")"]},lwc1:{format:["110001",E,U,I],display:[U,I,"(",E,")"]},lwc2:{format:["110010",E,O,I],display:[O,I,"(",E,")"]},lwc3:{format:["110011",E,O,I],display:[O,I,"(",E,")"]},lwl:{format:["100010",E,O,I],display:[O,I,"(",E,")"]},lwr:{format:["100110",E,O,I],display:[O,I,"(",E,")"]},lwu:{format:["100111",E,O,I],display:[O,I,"(",E,")"]},lwxc1:{format:["010011",E,O,"00000",j,"000000"],display:[j,O,"(",E,")"]},"madd.fmt":{format:["010011",C,U,z,j,"100",N],fmts:["S","D"],display:[j,C,z,U]},mfc1:{format:["010001","00000",O,z,"00000000000"],display:[O,z]},mfhi:{format:["000000","0000000000",$,"00000","010000"],display:[$]},mflo:{format:["000000","0000000000",$,"00000","010010"],display:[$]},"mov.fmt":{format:["010001",W,"00000",z,j,"000110"],fmts:["S","D"],display:[j,z]},movf:{format:["000000",E,k,"00",$,"00000","000001"],display:[$,E,k]},"movf.fmt":{format:["010001",W,k,"00",z,j,"010001"],fmts:["S","D"],display:[j,z,k]},movn:{format:["000000",E,O,$,"00000","001011"],display:[$,E,O]},"movn.fmt":{format:["010001",W,O,z,j,"010011"],fmts:["S","D"],display:[j,z,O]},movt:{format:["000000",E,k,"01",$,"00000","000001"],display:[$,E,k]},"movt.fmt":{format:["010001",W,k,"01",z,j,"010001"],fmts:["S","D"],display:[j,z,k]},movz:{format:["000000",E,O,$,"00000","001010"],display:[$,E,O]},"movz.fmt":{format:["010001",W,O,z,j,"010010"],fmts:["S","D"],display:[j,z,O]},"msub.fmt":{format:["010011",C,U,z,j,"101",N],fmts:["S","D"],display:[j,C,z,U]},mtc1:{format:["010001","00100",O,z,"00000000000"],display:[O,z]},mthi:{format:["000000",E,"000000000000000","010001"],display:[E]},mtlo:{format:["000000",E,"000000000000000","010011"],display:[E]},"mul.fmt":{format:["010001",W,U,z,j,"000010"],fmts:["S","D"],display:[j,z,U]},mult:{format:["000000",E,O,"0000000000","011000"],display:[E,O]},multu:{format:["000000",E,O,"0000000000","011001"],display:[E,O]},"neg.fmt":{format:["010001",W,"00000",z,j,"000111"],fmts:["S","D"],display:[j,z]},"nmadd.fmt":{format:["010011",C,U,z,j,"110",N],fmts:["S","D"],display:[j,C,z,U]},"nmsub.fmt":{format:["010011",C,U,z,j,"111",N],fmts:["S","D"],display:[j,C,z,U]},nop:{format:["00000000000000000000000000000000"],display:[]},nor:{format:["000000",E,O,$,"00000","100111"],display:[$,E,O]},or:{format:["000000",E,O,$,"00000","100101"],display:[$,E,O]},ori:{format:["001101",E,O,P],display:[O,E,P]},pref:{format:["110011",E,A,I],display:[A,I,"(",E,")"]},prefx:{format:["010011",E,O,A,"00000","001111"],display:[A,O,"(",E,")"]},"recip.fmt":{format:["010001",W,"00000",z,j,"010101"],fmts:["S","D"],display:[j,z]},"round.l.fmt":{format:["010001",W,"00000",z,j,"001000"],fmts:["S","D"],display:[j,z]},"round.w.fmt":{format:["010001",W,"00000",z,j,"001100"],fmts:["S","D"],display:[j,z]},"rsqrt.fmt":{format:["010001",W,"00000",z,j,"010110"],fmts:["S","D"],display:[j,z]},sb:{format:["101000",E,O,I],display:[O,I,"(",E,")"]},sc:{format:["111000",E,O,I],display:[O,I,"(",E,")"]},scd:{format:["111100",E,O,I],display:[O,I,"(",E,")"]},sd:{format:["111111",E,O,I],display:[O,I,"(",E,")"]},sdc1:{format:["111101",E,U,I],display:[U,I,"(",E,")"]},sdc2:{format:["111110",E,O,I],display:[O,I,"(",E,")"]},sdl:{format:["101100",E,O,I],display:[O,I,"(",E,")"]},sdr:{format:["101101",E,O,I],display:[O,I,"(",E,")"]},sdxc1:{format:["010011",E,A,z,"00000","001001"],display:[z,A,"(",E,")"]},sh:{format:["101001",E,O,I],display:[O,I,"(",E,")"]},sll:{format:["000000","00000",O,$,L,"000000"],display:[$,O,L]},sllv:{format:["000000",E,O,$,"00000","000100"],display:[$,O,E]},slt:{format:["000000",E,O,$,"00000","101010"],display:[$,E,O]},slti:{format:["001010",E,O,I],display:[O,E,I]},sltiu:{format:["001011",E,O,P],display:[O,E,P]},sltu:{format:["000000",E,O,$,"00000","101011"],display:[$,E,O]},"sqrt.fmt":{format:["010001",W,"00000",z,j,"000100"],fmts:["S","D"],display:[j,z]},sra:{format:["000000","00000",O,$,L,"000011"],display:[$,O,L]},srav:{format:["000000",E,O,$,"00000","000111"],display:[$,O,E]},srl:{format:["000000","00000",O,$,L,"000010"],display:[$,O,L]},srlv:{format:["000000",E,O,$,"00000","000110"],display:[$,O,E]},sub:{format:["000000",E,O,$,"00000","100010"],display:[$,E,O]},"sub.fmt":{format:["010001",W,U,z,j,"000001"],fmts:["S","D"],display:[j,z,U]},subu:{format:["000000",E,O,$,"00000","100011"],display:[$,E,O]},sw:{format:["101011",E,O,I],display:[O,I,"(",E,")"]},swc1:{format:["111001",E,U,I],display:[U,I,"(",E,")"]},swc2:{format:["111010",E,O,I],display:[O,I,"(",E,")"]},swc3:{format:["111011",E,O,I],display:[O,I,"(",E,")"]},swl:{format:["101010",E,O,I],display:[O,I,"(",E,")"]},swr:{format:["101110",E,O,I],display:[O,I,"(",E,")"]},swxc1:{format:["010011",E,A,z,"00000","001000"],display:[z,A,"(",E,")"]},sync:{format:["000000","000000000000000","00000","001111"],display:[]},syscall:{format:["000000",["uint20","00000000000000000000"],"001100"],display:[]},teq:{format:["000000",E,O,"uint10","110100"],display:[E,O]},teqi:{format:["000001",E,"01100",I],display:[E,I]},tge:{format:["000000",E,O,"uint10","110000"],display:[E,O]},tgei:{format:["000001",E,"01000",I],display:[E,I]},tgeiu:{format:["000001",E,"01001",P],display:[E,P]},tgeu:{format:["000000",E,O,"uint10","110001"],display:[E,O]},tlt:{format:["000000",E,O,"uint10","110010"],display:[E,O]},tlti:{format:["000001",E,"01010",I],display:[E,I]},tltiu:{format:["000001",E,"01011",P],display:[E,P]},tltu:{format:["000000",E,O,"uint10","110011"],display:[E,O]},tne:{format:["000000",E,O,"uint10","110110"],display:[E,O]},tnei:{format:["000001",E,"01110",I],display:[E,I]},"trunc.l.fmt":{format:["010001",W,"00000",z,j,"001001"],fmts:["S","D"],display:[j,z]},"trunc.w.fmt":{format:["010001",W,"00000",z,j,"001101"],fmts:["S","D"],display:[j,z]},xor:{format:["000000",E,O,$,"00000","100110"],display:[$,E,O]},xori:{format:["001110",E,O,P],display:[O,E,P]}},_="([A-Za-z0-3.]+)",G="(-)?0?([xbo]?)([A-Fa-f0-9]+)",Q="\\$?(\\w+)",R="\\$?[Ff]([0-9]+)",V=new RegExp("^\\s*"+_);function Z(t){const r=V.exec(t);if(r){const t=r[1].split(".");if(1===t.length)return t[0].toLowerCase();let e="",a=!1,o=!1;for(let r=t.length-1;r>0;r--){let s=t[r];a||("fmt"===s||m(s))&&(a=!0,s="fmt"),o||y(s)&&(o=!0,s="cond"),e="."+s+e}return(t[0]+e).toLowerCase()}return null}function H(t){if(function(t){if(!t)return!1;switch(t.substr(0,2)){case"rs":case"rt":case"rd":return!0}return!1}(t))return Q;if(function(t){if(!t)return!1;switch(t.substr(0,2)){case"fs":case"ft":case"fd":return!0}return!1}(t))return R;if(D(t))return G;throw new Error(`Unrecognized display entry ${t}`)}function J(t,r){return t+"\\s*\\(?"+r+"\\)?"}function K(t,r){if(r=function(t){return Object.assign({intermediate:!1},t)}(r),Array.isArray(t))return t.map(t=>X(t,r));if("object"==typeof t)return X(t,r);if("string"==typeof t){const e=t.split(/\r?\n/).filter(t=>!!t.trim());return 1===e.length?X(e[0],r):e.map(t=>X(t,r))}throw new Error("Unexpected input to parse. Pass a string or array of strings.")}function X(t,r){let e,a,s;if("string"==typeof t){if(!(e=Z(t)))throw new Error(`Could not parse opcode from ${t}`);if(!(a=B(e)))throw new Error(`Opcode ${e} was not recognized`);s=function(t,r,e){let a=function(t){const r=t.display,e=[_];for(let t=0;t<r.length;t++){const a=r[t],o=a.endsWith("?");let s="";if(o&&(s+="(?:"),"("===r[t+1]){if(o)throw new Error("Not prepared to generate optional regex with parenthesis");if(")"!==r[t+3])throw new Error("Not prepared to generate regex for multiple values in parenthesis");s+=J(H(a),H(r[t+2])),t+=3}else s+=H(a);o&&(s+="[,\\s]+)?"),e.push(s)}let a="^\\s*"+e.reduce((t,r,a)=>a===e.length-1?t+r:r.startsWith("(?:")?t+r:t+r+"[,\\s]+","")+"\\s*$";return new RegExp(a)}(r).exec(e);if(!a)throw`Could not parse instruction: ${e}`;let s={op:t};-1===t.indexOf(".fmt")&&-1===t.indexOf(".cond")||function(t,r,e,a,o){const s=t.split("."),i=r.split(".");if(s.length!==i.length)throw`Given opcode ${t} does not have all pieces (${r})`;for(let t=0;t<i.length;t++){const r=i[t];if("fmt"===r||"ftm3"===r){if(-1===e.indexOf(s[t].toUpperCase()))throw new Error(`Format ${s[t]} is not allowed for ${r}. Allowed values are ${e}`);"fmt"===r?o.fmt=n(s[t]):"fmt3"===r&&(o.fmt3=l(s[t]))}"cond"===r&&(o.cond=c(s[t]))}}(a[1],t,r.fmts,r.format,s);const i=r.display;let f=2;for(let t=0;t<i.length;t++,f++){const r=a[f];let e=i[t];const n=e.endsWith("?");switch(e=e.replace("?","")){case"(":case")":f--;continue;case"rs":case"rd":case"rt":{const t=o(r);if(void 0===t){if(n)continue;throw new Error(`Unrecognized ${e} register ${r}`)}s[e]=t;continue}case"fs":case"ft":case"fd":case"fr":if(s[e]=parseInt(r),isNaN(s[e]))throw new Error(`Unrecognized ${e} register ${r}`);continue}const l=D(e);if(!l)throw`Unrecognized opcode display entry ${e}`;{let t;const r=[a[f],a[f+1],a[f+2]];n&&!r[2]||(t=S(r,l.bits,l.signed,l.shift),s[e]=t),f+=2}}return s}(e,a,t)}else if("object"==typeof t){if(!(e=Z(t.op)))throw new Error("Object input to parse did not contain 'op'");if(!(a=B(e)))throw new Error(`Opcode ${e} was not recognized`);s=t}return r.intermediate?s:function(t,r){let e=0,a=0;for(let o=0;o<t.length;o++){let s,n=t[o],i=F(Array.isArray(n)?n[0]:n);if(e=e<<i>>>0,Array.isArray(n)){for(let t=0;t<n.length;t++)if((s=Y(n[t],e,r)).wrote){e=s.output;break}}else(s=Y(n,e,r)).wrote&&(e=s.output);a+=i}if(32!=a)throw new Error("Incorrect number of bits written for format "+t);return e}(a.format,s)}function Y(t,r,e){let a=!1;if(w(t))r|=g(t),a=!0;else if(void 0!==e[t]){a=!0,r|=e[t]&b(F(t))}return{wrote:a,output:r>>>0}}function tt(t,r){if(r=function(t){return Object.assign({casing:"toUpperCase",commas:!1,include$:!1,intermediate:!1,numBase:16},t)}(r),Array.isArray(t))return t.map(t=>rt(t,r));const e=t instanceof ArrayBuffer;if(e||t instanceof DataView){const a=e?new DataView(t):t,o=[];for(let t=0;t<a.byteLength;t+=4)o.push(rt(a.getUint32(t),r));return o}const a=typeof t;if("number"===a||"object"===a)return rt(t,r);throw new Error("Unexpected input to print.")}function rt(t,r){let e,o,s;if("number"==typeof t){if(!(o=function(t){let r="",e=0;for(let a in T){const o=M(t,T[a].format,T[a].fmts);o>e&&(r=a,e=o)}return r}(t)))throw new Error("Unrecognized instruction");(s=function(t,r){let e={};for(let a=r.length-1;a>=0;a--){let o,s,n=r[a];if(Array.isArray(n))for(let r=n.length-1;r>=0;r--){if(s=F(n[r]),o=t&b(s),!w(n[r])){n=n[r];break}if(n[r]===v(o.toString(2),s)){n=n[r];break}}else s=F(n),o=t&b(s);w(n)?t>>>=s:(e[n]=o,t>>>=s)}return e}(t,(e=B(o)).format)).op=o}else{if("object"!=typeof t)throw new Error(`Unexpected value ${t}`);if(!t.op)throw new Error("Instruction object did not contain op");e=B(t.op),s=t}if(!e)throw new Error("Invalid opcode");return r.intermediate?s:function(t,r,e){let o=function(t,r){const e=t.op.split(".");for(let r=0;r<e.length;r++)if("fmt"===e[r])if(t.hasOwnProperty("fmt3"))e[r]=d(t.fmt3);else{if(!t.hasOwnProperty("fmt"))throw new Error("Format value not available");e[r]=i(t.fmt)}else if("cond"===e[r]){if(!t.hasOwnProperty("cond"))throw new Error("Condition value not available");e[r]=u(t.cond)}return ot(e.join("."),r.casing)}(t,e);function s(r){switch(r){case"rs":case"rt":case"rd":return function(t){for(let r in a)if(a[r]===t)return r;return""}(t[r]);case"fs":case"ft":case"fd":return function(t){if("number"!=typeof t)throw new Error("getFloatRegName encountered non-number");return"F"+t}(t[r])}}const n=r.display;for(let r=0;r<n.length;r++){let a=n[r];if(a.endsWith("?")&&(a=a.replace("?",""),void 0===t[a]))continue;let i=t[a];if(void 0===i&&"("!==a&&")"!==a)throw new Error(`Expected ${a} value, got undefined`);let f=e.commas;switch(a){case"rs":case"rt":case"rd":case"fs":case"ft":case"fd":o.endsWith("(")||(o+=" "),o+=at(s(a),e);break;case"(":case")":f=!1,o.endsWith(",")&&(o=o.slice(0,-1)),o+=a}const l=D(a);l&&(o.endsWith("(")||(o+=" "),l.signed&&16===l.bits&&(i=x(i)),l.shift&&(i<<=l.shift),o+=et(i,e)),f&&r!==n.length-1&&!o.endsWith(",")&&(o+=",")}return o.trim()}(s,e,r)}function et(t,r){if(0===t)return t.toString(r.numBase);let e="";return t<0&&(e+="-"),16===r.numBase?e+="0x":8===r.numBase?e+="0o":2===r.numBase&&(e+="0b"),e+=ot(Math.abs(t).toString(r.numBase),r.casing)}function at(t,r){let e="";return r.include$&&(e+="$"),e+=ot(t,r.casing)}function ot(t,r){switch(r){case"toLowerCase":return t.toLowerCase();case"toUpperCase":default:return t.toUpperCase()}}e.d(r,"parse",function(){return K}),e.d(r,"print",function(){return tt})}])});